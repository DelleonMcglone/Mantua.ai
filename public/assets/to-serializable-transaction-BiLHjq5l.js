const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/resolveImplementation-BrTLPAAb.js","assets/index-tILzMOs2.js","assets/index-Gp6S1Gtq.css","assets/read-contract-Bch4-qur.js","assets/utils-DmlJ-9bG.js","assets/decodeAbiParameters-CNGCbnoP.js","assets/extractIPFS-B6DfaPII.js","assets/getInstalledModules-DED9u39D.js","assets/eth_estimateGas-CXnV06Oy.js","assets/send-eip712-transaction-Bp9Mhxs2.js","assets/eth_sendRawTransaction-DPdnXbFR.js","assets/concat-hex-DOrtD6mP.js","assets/eth_getTransactionCount-COymuGBB.js"])))=>i.map(i=>d[i]);
import{bn as U,bo as $,bp as M,aS as O,bq as l,br as N,bs as V,_ as y,aQ as C,b1 as j,be as H,b5 as D,aR as G,e as Z,b9 as d,aZ as W,bj as k,bk as Q,aU as Y,s as K,bt as J,f as w,bu as T,bh as X,b8 as z}from"./index-tILzMOs2.js";import{f as q,p as ee,i as te,a as ne,s as v,t as ae,d as re}from"./decodeAbiParameters-CNGCbnoP.js";function ie(e){const t=[],n=e.length;for(let a=0;a<n;a++){const r=e[a],i=q(r);t.push(i)}return t}function se(e){const t=ee(e),n=[],a=e.length;for(let r=0;r<a;r++){const i=e[r];te(i)||n.push(ne(i,t))}return n}const oe={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ce={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function de(e){const{abi:t,data:n}=e,a=v(n,0,4);if(a==="0x")throw new U;const i=[...t||[],oe,ce].find(s=>s.type==="error"&&a===ae($(s)));if(!i)throw new M(a,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?re(i.inputs,v(n,4)):void 0,errorName:i.name}}const ue={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function le(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=fe(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>O(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=l(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=l(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=l(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=l(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=l(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=l(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=ue[e.type]),typeof e.value<"u"&&(t.value=l(e.value)),t}function fe(e){return e.map(t=>({address:t.address,r:t.r?l(BigInt(t.r)):t.r,s:t.s?l(BigInt(t.s)):t.s,chainId:l(t.chainId),nonce:l(t.nonce),...typeof t.yParity<"u"?{yParity:l(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:l(t.v)}:{}}))}function me(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:N(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function ye(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const pe=ye({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0}),ge="https://{clientId}.ipfscdn.io/ipfs/{cid}";function he(e){var t,n;if(e.uri.startsWith("ipfs://")){const a=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??ge,r=e.client.clientId,i=Pe(e.uri);let s;return typeof globalThis<"u"&&"Application"in globalThis&&(s=globalThis.Application.applicationId),`${a.replace("{clientId}",r).split("/ipfs")[0]}/ipfs/${i}${s?`?bundleId=${s}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function Pe(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}const be=new Map;function we(e){return be.get(e)}async function _e(e){var a,r,i,s,u,f,o,h,_;if(V){const m=e.uri.split("://")[1];if(!m)throw new Error("Invalid hash");const p=we(m);if(p)return{json:()=>Promise.resolve(p),ok:!0,status:200}}let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:m}=await y(async()=>{const{resolveArweaveScheme:p}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:p}},[]);t=m(e)}else t=he(e);const n=await C(e.client)(t,{headers:(i=(r=(a=e.client.config)==null?void 0:a.storage)==null?void 0:r.fetch)==null?void 0:i.headers,keepalive:(f=(u=(s=e.client.config)==null?void 0:s.storage)==null?void 0:u.fetch)==null?void 0:f.keepalive,requestTimeoutMs:e.requestTimeoutMs??((_=(h=(o=e.client.config)==null?void 0:o.storage)==null?void 0:h.fetch)==null?void 0:_.requestTimeoutMs)??6e4});if(!n.ok){const m=await n.text();throw new Error(`Failed to download file: ${n.status} ${n.statusText} ${m||""}`)}return n}function xe(e,t="https://contract.thirdweb.com/abi"){return j(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337||e.chain.id===pe.id)return await B(e);try{return await Ae(e,t)}catch{return await B(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function Ae(e,t="https://contract.thirdweb.com/abi"){const a=await(await C(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!a||a.error)throw new Error(`Failed to resolve ABI from contract API. ${a.error||""}`);return a}async function L(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([y(()=>import("./resolveImplementation-BrTLPAAb.js"),__vite__mapDeps([0,1,2,3,4,5])),y(()=>import("./extractIPFS-B6DfaPII.js"),__vite__mapDeps([6,1,2]))]),{bytecode:a}=await t(e);if(a==="0x"){const{id:i,name:s}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${s||"Unknown Chain"} (chain id: ${i})]`)}const r=n(a);if(!r)return[];try{return(await(await _e({client:e.client,uri:r})).json()).output.abi}catch{return[]}}const Fe={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},Ie={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},Ee={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function B(e,t,n){const[a,r,i,s,u]=await Promise.all([L(e),Ge(e),Te(e),ve(e),Be(e)]),f=[...new Set([...r,...i,...s,...u])];if(!f.length)return a;const o=await Se({contract:e,plugins:f,resolveSubAbi:n});return Re({pluginAbis:o,rootAbi:a})}async function Ge(e){try{const{readContract:t}=await y(async()=>{const{readContract:a}=await import("./read-contract-Bch4-qur.js");return{readContract:a}},__vite__mapDeps([3,1,2,4,5])),n=await t({contract:e,method:Fe});return n.length?[...new Set(n.map(a=>a.pluginAddress))]:[]}catch{}return[]}async function Te(e){try{const{readContract:t}=await y(async()=>{const{readContract:a}=await import("./read-contract-Bch4-qur.js");return{readContract:a}},__vite__mapDeps([3,1,2,4,5])),n=await t({contract:e,method:Ie});return n.length?[...new Set(n.map(a=>a.metadata.implementation))]:[]}catch{}return[]}async function ve(e){try{const{getInstalledModules:t}=await y(async()=>{const{getInstalledModules:a}=await import("./getInstalledModules-DED9u39D.js");return{getInstalledModules:a}},__vite__mapDeps([7,3,1,2,4,5])),n=await t({contract:e});return n.length?[...new Set(n.map(a=>a.implementation))]:[]}catch{}return[]}async function Be(e){try{const{readContract:t}=await y(async()=>{const{readContract:a}=await import("./read-contract-Bch4-qur.js");return{readContract:a}},__vite__mapDeps([3,1,2,4,5])),n=await t({contract:e,method:Ee});return n.length?n.map(a=>a.facetAddress):[]}catch{}return[]}async function Se(e){return Promise.all(e.plugins.map(t=>{const n=H({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):L(n)}))}function Re(e){let t=e.pluginAbis.flat().filter(a=>a.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(a=>a.type!=="fallback"&&a.type!=="receive").filter(Boolean));const n=[...new Set(ie(t))];return se(n)}async function Ce(e){const t=await e({method:"eth_gasPrice"});return D(t)}async function S(e){const{client:t,chain:n,percentMultiplier:a}=e,r=G({chain:n,client:t}),i=await Ce(r),s=a?i/BigInt(100)*BigInt(a):0n;return i+s}async function De(e,t){const n=t.blockTag??"latest",a=t.includeTransactions??!1,r=t.blockNumber!==void 0?Z(t.blockNumber):void 0,i=await e({method:"eth_getBlockByNumber",params:[r||n,a]});if(!i)throw new Error("Block not found");return me(i)}async function Le(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return D(t)}function A(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const Ue=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449,5464,2020,2021,98866];async function $e(e){var s;const[t,n,a,r]=await Promise.all([d(e.maxFeePerGas),d(e.maxPriorityFeePerGas),d(e.gasPrice),d(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof a=="bigint")return{gasPrice:a};const i=await Me(e.client,e.chain,r==="legacy"?"legacy":"eip1559");return(s=e.chain.experimental)!=null&&s.increaseZeroByteCount?i.gasPrice?{gasPrice:A(i.gasPrice)}:{maxFeePerGas:t??A(i.maxFeePerGas??0n),maxPriorityFeePerGas:n??A(i.maxPriorityFeePerGas??0n)}:i.gasPrice!==void 0?i:{maxFeePerGas:t??i.maxFeePerGas,maxPriorityFeePerGas:n??i.maxPriorityFeePerGas}}async function Me(e,t,n){if((n??t.feeType)==="legacy"||Ue.includes(t.id))return{gasPrice:await S({chain:t,client:e,percentMultiplier:10})};const r=await Oe(e,t);return r.maxFeePerGas!==null&&r.maxPriorityFeePerGas!==null?{maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas}:{gasPrice:await S({chain:t,client:e,percentMultiplier:10})}}async function Oe(e,t,n=10){let a=null,r=null;const i=G({chain:t,client:e}),[s,u]=await Promise.all([De(i,{blockTag:"latest"}),Le(i).catch(()=>null)]),f=s==null?void 0:s.baseFeePerGas,o=t.id;return o===220||o===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(o===80002||o===137?r=await He(o):u!==null&&(r=u),r==null||f==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(r=Ne(r,n),a=f*2n+r,(o===42220||o===44787||o===62320)&&(r=a),{maxFeePerGas:a,maxPriorityFeePerGas:r}))}function Ne(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function Ve(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation.polygon.technology/amoy"}}const je=31n;async function He(e){const t=Ve(e);try{const a=(await(await fetch(t)).json()).fast.maxPriorityFee;if(a>0){const r=Number.parseFloat(a).toFixed(9);return W(r,9)}}catch(n){console.error("failed to fetch gas",n)}return je}async function R(e){var i;const{error:t,contract:n,fromAddress:a}=e;k(t)&&n&&Q({chainId:(i=n.chain)==null?void 0:i.id,client:n.client,contractAddress:n.address,error:t,walletAddress:a});const r=await Ze({contract:n,error:t});return r?new We(r,n):t}async function Ze(e){const{error:t,contract:n}=e;if(typeof t=="object"){const a=t;if(a.data&&a.data!=="0x"&&Y(a.data)){let r=n==null?void 0:n.abi;n&&!r&&(r=await xe(n).catch(()=>{}));const i=de({abi:r,data:a.data});return`${i.errorName}${i.args?` - ${i.args}`:""}`}}return`Execution Reverted: ${K(t)}`}class We extends Error{constructor(t,n){var r,i;let a=t;J&&n&&(a=[t,"",`contract: ${n.address}`,`chainId: ${(r=n.chain)==null?void 0:r.id}`].join(`
`)),super(a),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(i=n==null?void 0:n.chain)==null?void 0:i.id,this.message=a}}const E=new WeakMap;async function ke(e){var i,s;const t=typeof e.from=="string"?e.from??void 0:((i=e.from)==null?void 0:i.address)??((s=e.account)==null?void 0:s.address),n={...e.transaction,from:t};if(E.has(n))return E.get(n);const{account:a}=e,r=(async()=>{var g,I;const u=await d(e.transaction.gas);if(u!==void 0)return u;if(a!=null&&a.estimateGas)try{let c=await a.estimateGas(e.transaction);return(g=e.transaction.chain.experimental)!=null&&g.increaseZeroByteCount&&(c=A(c)),c}catch(c){throw await R({contract:e.transaction.__contract,error:c,fromAddress:t})}const{encode:f}=await y(async()=>{const{encode:c}=await import("./index-tILzMOs2.js").then(P=>P.cE);return{encode:c}},__vite__mapDeps([1,2])),[o,h,_,m]=await Promise.all([f(e.transaction),d(e.transaction.to),d(e.transaction.value),d(e.transaction.authorizationList)]),[{getRpcClient:p},{eth_estimateGas:F}]=await Promise.all([y(()=>import("./index-tILzMOs2.js").then(c=>c.cD),__vite__mapDeps([1,2])),y(()=>import("./eth_estimateGas-CXnV06Oy.js"),__vite__mapDeps([8,1,2]))]),x=p(e.transaction);try{const c=le({authorizationList:m==null?void 0:m.map(b=>({...b,contractAddress:w(b.address),nonce:Number(b.nonce),r:T(b.r),s:T(b.s)})),data:o,from:t?w(t):void 0,to:h?w(h):void 0,value:_});let P=await F(x,c);return(I=e.transaction.chain.experimental)!=null&&I.increaseZeroByteCount&&(P=A(P)),P}catch(c){throw await R({contract:e.transaction.__contract,error:c,fromAddress:t})}})();return E.set(n,r),r}async function Ke(e){if(await X(e.transaction.chain)){const{getZkGasFees:x}=await y(async()=>{const{getZkGasFees:P}=await import("./send-eip712-transaction-Bp9Mhxs2.js").then(b=>b.a);return{getZkGasFees:P}},__vite__mapDeps([9,10,1,2,11,5])),{gas:g,maxFeePerGas:I,maxPriorityFeePerGas:c}=await x({from:typeof e.from=="string"?w(e.from):e.from!==void 0?w(e.from.address):void 0,transaction:e.transaction});e.transaction={...e.transaction,gas:g,maxFeePerGas:I,maxPriorityFeePerGas:c}}const n=G(e.transaction),a=e.transaction.chain.id,r=e.from;let[i,s,u,f,o,h,_,m,p]=await Promise.all([z(e.transaction),(async()=>{const x=await d(e.transaction.nonce);return x!==void 0?x:r?await y(async()=>{const{eth_getTransactionCount:g}=await import("./eth_getTransactionCount-COymuGBB.js");return{eth_getTransactionCount:g}},__vite__mapDeps([12,1,2])).then(({eth_getTransactionCount:g})=>g(n,{address:typeof r=="string"?w(r):w(r.address),blockTag:"pending"})):void 0})(),ke({...e,from:e.from}),$e(e.transaction),d(e.transaction.to),d(e.transaction.accessList),d(e.transaction.value),d(e.transaction.authorizationList),d(e.transaction.type)]);const F=await d(e.transaction.extraGas);return F&&(u+=F),{accessList:h,authorizationList:m,chainId:a,data:i,gas:u,nonce:s,to:o,type:p,value:_,...f}}export{de as d,Me as g,Ke as t};
