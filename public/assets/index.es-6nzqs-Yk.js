import{e as Je}from"./events-u35NfD2A.js";import{aI as Jr,ap as Xr,aJ as Z}from"./index-tILzMOs2.js";var Xe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wt=function(e,t){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},wt(e,t)};function eo(e,t){wt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dt=function(){return Dt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Dt.apply(this,arguments)};function to(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function ro(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(i=(o<3?u(i):o>3?u(t,r,i):u(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function no(e,t){return function(r,n){t(r,n,e)}}function oo(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function io(e,t,r,n){function o(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function f(a){try{s(n.next(a))}catch(l){u(l)}}function c(a){try{s(n.throw(a))}catch(l){u(l)}}function s(a){a.done?i(a.value):o(a.value).then(f,c)}s((n=n.apply(e,t||[])).next())})}function so(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(s){return function(a){return c([s,a])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function ao(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function uo(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function mt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],u;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return i}function co(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zr(arguments[t]));return e}function fo(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],u=0,f=i.length;u<f;u++,o++)n[o]=i[u];return n}function Be(e){return this instanceof Be?(this.v=e,this):new Be(e)}function lo(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(d){n[d]&&(o[d]=function(y){return new Promise(function(p,g){i.push([d,y,p,g])>1||f(d,y)})})}function f(d,y){try{c(n[d](y))}catch(p){l(i[0][3],p)}}function c(d){d.value instanceof Be?Promise.resolve(d.value.v).then(s,a):l(i[0][2],d)}function s(d){f("next",d)}function a(d){f("throw",d)}function l(d,y){d(y),i.shift(),i.length&&f(i[0][0],i[0][1])}}function ho(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,i){t[o]=e[o]?function(u){return(r=!r)?{value:Be(e[o](u)),done:o==="return"}:i?i(u):u}:i}}function po(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof mt=="function"?mt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(u){return new Promise(function(f,c){u=e[i](u),o(f,c,u.done,u.value)})}}function o(i,u,f,c){Promise.resolve(c).then(function(s){i({value:s,done:f})},u)}}function bo(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function yo(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function go(e){return e&&e.__esModule?e:{default:e}}function wo(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Do(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const mo=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Dt},__asyncDelegator:ho,__asyncGenerator:lo,__asyncValues:po,__await:Be,__awaiter:io,__classPrivateFieldGet:wo,__classPrivateFieldSet:Do,__createBinding:ao,__decorate:ro,__exportStar:uo,__extends:eo,__generator:so,__importDefault:go,__importStar:yo,__makeTemplateObject:bo,__metadata:oo,__param:no,__read:Zr,__rest:to,__spread:co,__spreadArrays:fo,__values:mt},Symbol.toStringTag,{value:"Module"})),Ze=Jr(mo);var it={},Se={},Zt;function vo(){if(Zt)return Se;Zt=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Se.delay=e,Se}var pe={},st={},be={},Qt;function Eo(){return Qt||(Qt=1,Object.defineProperty(be,"__esModule",{value:!0}),be.ONE_THOUSAND=be.ONE_HUNDRED=void 0,be.ONE_HUNDRED=100,be.ONE_THOUSAND=1e3),be}var at={},er;function _o(){return er||(er=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(at)),at}var tr;function Qr(){return tr||(tr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ze;t.__exportStar(Eo(),e),t.__exportStar(_o(),e)}(st)),st}var rr;function Oo(){if(rr)return pe;rr=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.fromMiliseconds=pe.toMiliseconds=void 0;const e=Qr();function t(n){return n*e.ONE_THOUSAND}pe.toMiliseconds=t;function r(n){return Math.floor(n/e.ONE_THOUSAND)}return pe.fromMiliseconds=r,pe}var nr;function Ao(){return nr||(nr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ze;t.__exportStar(vo(),e),t.__exportStar(Oo(),e)}(it)),it}var we={},or;function So(){if(or)return we;or=1,Object.defineProperty(we,"__esModule",{value:!0}),we.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:o})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return we.Watch=e,we.default=e,we}var ut={},Fe={},ir;function Fo(){if(ir)return Fe;ir=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.IWatch=void 0;class e{}return Fe.IWatch=e,Fe}var sr;function Co(){return sr||(sr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ze.__exportStar(Fo(),e)}(ut)),ut}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ze;t.__exportStar(Ao(),e),t.__exportStar(So(),e),t.__exportStar(Co(),e),t.__exportStar(Qr(),e)})(Xe);class xo{}let Bo=class extends xo{constructor(t){super()}};const ar=Xe.FIVE_SECONDS,To={pulse:"heartbeat_pulse"};let qf=class en extends Bo{constructor(t){super(t),this.events=new Je.EventEmitter,this.interval=ar,this.interval=(t==null?void 0:t.interval)||ar}static async init(t){const r=new en(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Xe.toMiliseconds(this.interval))}pulse(){this.events.emit(To.pulse)}};const Io=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ro=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Po=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function No(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Uo(e);return}return t}function Uo(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Le(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Po.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Io.test(e)||Ro.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,No)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function jo(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function W(e,...t){try{return jo(e(...t))}catch(r){return Promise.reject(r)}}function Lo(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function Mo(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function He(e){if(Lo(e))return String(e);if(Mo(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return He(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const vt="base64:";function zo(e){return typeof e=="string"?e:vt+ko(e)}function $o(e){return typeof e!="string"||!e.startsWith(vt)?e:Wo(e.slice(vt.length))}function Wo(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function ko(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function Y(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Ho(...e){return Y(e.join(":"))}function Me(e){return e=Y(e),e?e+":":""}function qo(e,t){if(t===void 0)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}function Vo(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const Ko="memory",Yo=()=>{const e=new Map;return{name:Ko,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function Vf(e={}){const t={mounts:{"":e.driver||Yo()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=s=>{for(const a of t.mountpoints)if(s.startsWith(a))return{base:a,relativeKey:s.slice(a.length),driver:t.mounts[a]};return{base:"",relativeKey:s,driver:t.mounts[""]}},n=(s,a)=>t.mountpoints.filter(l=>l.startsWith(s)||a&&s.startsWith(l)).map(l=>({relativeBase:s.length>l.length?s.slice(l.length):void 0,mountpoint:l,driver:t.mounts[l]})),o=(s,a)=>{if(t.watching){a=Y(a);for(const l of t.watchListeners)l(s,a)}},i=async()=>{if(!t.watching){t.watching=!0;for(const s in t.mounts)t.unwatch[s]=await ur(t.mounts[s],o,s)}},u=async()=>{if(t.watching){for(const s in t.unwatch)await t.unwatch[s]();t.unwatch={},t.watching=!1}},f=(s,a,l)=>{const d=new Map,y=p=>{let g=d.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},d.set(p.base,g)),g};for(const p of s){const g=typeof p=="string",m=Y(g?p:p.key),_=g?void 0:p.value,S=g||!p.options?a:{...a,...p.options},w=r(m);y(w).items.push({key:m,value:_,relativeKey:w.relativeKey,options:S})}return Promise.all([...d.values()].map(p=>l(p))).then(p=>p.flat())},c={hasItem(s,a={}){s=Y(s);const{relativeKey:l,driver:d}=r(s);return W(d.hasItem,l,a)},getItem(s,a={}){s=Y(s);const{relativeKey:l,driver:d}=r(s);return W(d.getItem,l,a).then(y=>Le(y))},getItems(s,a={}){return f(s,a,l=>l.driver.getItems?W(l.driver.getItems,l.items.map(d=>({key:d.relativeKey,options:d.options})),a).then(d=>d.map(y=>({key:Ho(l.base,y.key),value:Le(y.value)}))):Promise.all(l.items.map(d=>W(l.driver.getItem,d.relativeKey,d.options).then(y=>({key:d.key,value:Le(y)})))))},getItemRaw(s,a={}){s=Y(s);const{relativeKey:l,driver:d}=r(s);return d.getItemRaw?W(d.getItemRaw,l,a):W(d.getItem,l,a).then(y=>$o(y))},async setItem(s,a,l={}){if(a===void 0)return c.removeItem(s);s=Y(s);const{relativeKey:d,driver:y}=r(s);y.setItem&&(await W(y.setItem,d,He(a),l),y.watch||o("update",s))},async setItems(s,a){await f(s,a,async l=>{if(l.driver.setItems)return W(l.driver.setItems,l.items.map(d=>({key:d.relativeKey,value:He(d.value),options:d.options})),a);l.driver.setItem&&await Promise.all(l.items.map(d=>W(l.driver.setItem,d.relativeKey,He(d.value),d.options)))})},async setItemRaw(s,a,l={}){if(a===void 0)return c.removeItem(s,l);s=Y(s);const{relativeKey:d,driver:y}=r(s);if(y.setItemRaw)await W(y.setItemRaw,d,a,l);else if(y.setItem)await W(y.setItem,d,zo(a),l);else return;y.watch||o("update",s)},async removeItem(s,a={}){typeof a=="boolean"&&(a={removeMeta:a}),s=Y(s);const{relativeKey:l,driver:d}=r(s);d.removeItem&&(await W(d.removeItem,l,a),(a.removeMeta||a.removeMata)&&await W(d.removeItem,l+"$",a),d.watch||o("remove",s))},async getMeta(s,a={}){typeof a=="boolean"&&(a={nativeOnly:a}),s=Y(s);const{relativeKey:l,driver:d}=r(s),y=Object.create(null);if(d.getMeta&&Object.assign(y,await W(d.getMeta,l,a)),!a.nativeOnly){const p=await W(d.getItem,l+"$",a).then(g=>Le(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(y,p))}return y},setMeta(s,a,l={}){return this.setItem(s+"$",a,l)},removeMeta(s,a={}){return this.removeItem(s+"$",a)},async getKeys(s,a={}){var m;s=Me(s);const l=n(s,!0);let d=[];const y=[];let p=!0;for(const _ of l){(m=_.driver.flags)!=null&&m.maxDepth||(p=!1);const S=await W(_.driver.getKeys,_.relativeBase,a);for(const w of S){const O=_.mountpoint+Y(w);d.some(F=>O.startsWith(F))||y.push(O)}d=[_.mountpoint,...d.filter(w=>!w.startsWith(_.mountpoint))]}const g=a.maxDepth!==void 0&&!p;return y.filter(_=>(!g||qo(_,a.maxDepth))&&Vo(_,s))},async clear(s,a={}){s=Me(s),await Promise.all(n(s,!1).map(async l=>{if(l.driver.clear)return W(l.driver.clear,l.relativeBase,a);if(l.driver.removeItem){const d=await l.driver.getKeys(l.relativeBase||"",a);return Promise.all(d.map(y=>l.driver.removeItem(y,a)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(s=>cr(s)))},async watch(s){return await i(),t.watchListeners.push(s),async()=>{t.watchListeners=t.watchListeners.filter(a=>a!==s),t.watchListeners.length===0&&await u()}},async unwatch(){t.watchListeners=[],await u()},mount(s,a){if(s=Me(s),s&&t.mounts[s])throw new Error(`already mounted at ${s}`);return s&&(t.mountpoints.push(s),t.mountpoints.sort((l,d)=>d.length-l.length)),t.mounts[s]=a,t.watching&&Promise.resolve(ur(a,o,s)).then(l=>{t.unwatch[s]=l}).catch(console.error),c},async unmount(s,a=!0){var l,d;s=Me(s),!(!s||!t.mounts[s])&&(t.watching&&s in t.unwatch&&((d=(l=t.unwatch)[s])==null||d.call(l),delete t.unwatch[s]),a&&await cr(t.mounts[s]),t.mountpoints=t.mountpoints.filter(y=>y!==s),delete t.mounts[s])},getMount(s=""){s=Y(s)+":";const a=r(s);return{driver:a.driver,base:a.base}},getMounts(s="",a={}){return s=Y(s),n(s,a.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(s,a={})=>c.getKeys(s,a),get:(s,a={})=>c.getItem(s,a),set:(s,a,l={})=>c.setItem(s,a,l),has:(s,a={})=>c.hasItem(s,a),del:(s,a={})=>c.removeItem(s,a),remove:(s,a={})=>c.removeItem(s,a)};return c}function ur(e,t,r){return e.watch?e.watch((n,o)=>t(n,r+o)):()=>{}}async function cr(e){typeof e.dispose=="function"&&await W(e.dispose)}const Go=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),Jo=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(n,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function It(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Jo(e)}catch{return e}}function _e(e){return typeof e=="string"?e:Go(e)||""}function Xo(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var Zo=Qo;function Qo(e,t,r){var n=r&&r.stringify||Xo,o=1;if(typeof e=="object"&&e!==null){var i=t.length+o;if(i===1)return e;var u=new Array(i);u[0]=n(e);for(var f=1;f<i;f++)u[f]=n(t[f]);return u.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var s="",a=1-o,l=-1,d=e&&e.length||0,y=0;y<d;){if(e.charCodeAt(y)===37&&y+1<d){switch(l=l>-1?l:0,e.charCodeAt(y+1)){case 100:case 102:if(a>=c||t[a]==null)break;l<y&&(s+=e.slice(l,y)),s+=Number(t[a]),l=y+2,y++;break;case 105:if(a>=c||t[a]==null)break;l<y&&(s+=e.slice(l,y)),s+=Math.floor(Number(t[a])),l=y+2,y++;break;case 79:case 111:case 106:if(a>=c||t[a]===void 0)break;l<y&&(s+=e.slice(l,y));var p=typeof t[a];if(p==="string"){s+="'"+t[a]+"'",l=y+2,y++;break}if(p==="function"){s+=t[a].name||"<anonymous>",l=y+2,y++;break}s+=n(t[a]),l=y+2,y++;break;case 115:if(a>=c)break;l<y&&(s+=e.slice(l,y)),s+=String(t[a]),l=y+2,y++;break;case 37:l<y&&(s+=e.slice(l,y)),s+="%",l=y+2,y++,a--;break}++a}++y}return l===-1?e:(l<d&&(s+=e.slice(l)),s)}const fr=Zo;var Ee=Q;const Te=ci().console||{},ei={mapHttpRequest:ze,mapHttpResponse:ze,wrapRequestSerializer:ct,wrapResponseSerializer:ct,wrapErrorSerializer:ct,req:ze,res:ze,err:ii};function ti(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Q(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=e.browser.write||Te;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},o=ti(e.browser.serialize,n);let i=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const u=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");const f=e.level||"info",c=Object.create(r);c.log||(c.log=Ie),Object.defineProperty(c,"levelVal",{get:a}),Object.defineProperty(c,"level",{get:l,set:d});const s={transmit:t,serialize:o,asObject:e.browser.asObject,levels:u,timestamp:si(e)};c.levels=Q.levels,c.level=f,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ie,c.serializers=n,c._serialize=o,c._stdErrSerialize=i,c.child=y,t&&(c._logEvent=Et());function a(){return this.level==="silent"?1/0:this.levels.values[this.level]}function l(){return this._level}function d(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,De(s,c,"error","log"),De(s,c,"fatal","error"),De(s,c,"warn","error"),De(s,c,"info","log"),De(s,c,"debug","log"),De(s,c,"trace","log")}function y(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},o&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(o&&m){var _=Object.assign({},n,m),S=e.browser.serialize===!0?Object.keys(_):o;delete p.serializers,Qe([p],S,_,this._stdErrSerialize)}function w(O){this._childLevel=(O._childLevel|0)+1,this.error=me(O,p,"error"),this.fatal=me(O,p,"fatal"),this.warn=me(O,p,"warn"),this.info=me(O,p,"info"),this.debug=me(O,p,"debug"),this.trace=me(O,p,"trace"),_&&(this.serializers=_,this._serialize=S),t&&(this._logEvent=Et([].concat(O._logEvent.bindings,p)))}return w.prototype=this,new w(this)}return c}Q.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Q.stdSerializers=ei;Q.stdTimeFunctions=Object.assign({},{nullTime:tn,epochTime:rn,unixTime:ai,isoTime:ui});function De(e,t,r,n){const o=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?Ie:o[r]?o[r]:Te[r]||Te[n]||Ie,ri(e,t,r)}function ri(e,t,r){!e.transmit&&t[r]===Ie||(t[r]=function(n){return function(){const i=e.timestamp(),u=new Array(arguments.length),f=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Te?Te:this;for(var c=0;c<u.length;c++)u[c]=arguments[c];if(e.serialize&&!e.asObject&&Qe(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(f,ni(this,r,u,i)):n.apply(f,u),e.transmit){const s=e.transmit.level||t.level,a=Q.levels.values[s],l=Q.levels.values[r];if(l<a)return;oi(this,{ts:i,methodLevel:r,methodValue:l,transmitLevel:s,transmitValue:Q.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}}(t[r]))}function ni(e,t,r,n){e._serialize&&Qe(r,e._serialize,e.serializers,e._stdErrSerialize);const o=r.slice();let i=o[0];const u={};n&&(u.time=n),u.level=Q.levels.values[t];let f=(e._childLevel|0)+1;if(f<1&&(f=1),i!==null&&typeof i=="object"){for(;f--&&typeof o[0]=="object";)Object.assign(u,o.shift());i=o.length?fr(o.shift(),o):void 0}else typeof i=="string"&&(i=fr(o.shift(),o));return i!==void 0&&(u.msg=i),u}function Qe(e,t,r,n){for(const o in e)if(n&&e[o]instanceof Error)e[o]=Q.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(const i in e[o])t&&t.indexOf(i)>-1&&i in r&&(e[o][i]=r[i](e[o][i]))}function me(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return e[r].apply(this,n)}}function oi(e,t,r){const n=t.send,o=t.ts,i=t.methodLevel,u=t.methodValue,f=t.val,c=e._logEvent.bindings;Qe(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(s){return c.indexOf(s)===-1}),e._logEvent.level.label=i,e._logEvent.level.value=u,n(i,e._logEvent,f),e._logEvent=Et(c)}function Et(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ii(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)t[r]===void 0&&(t[r]=e[r]);return t}function si(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?tn:rn}function ze(){return{}}function ct(e){return e}function Ie(){}function tn(){return!1}function rn(){return Date.now()}function ai(){return Math.round(Date.now()/1e3)}function ui(){return new Date(Date.now()).toISOString()}function ci(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}const nn=Xr(Ee),fi={level:"info"},Pe="custom_context",Rt=1e3*1024;let li=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},lr=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new li(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}},on=class{constructor(t,r=Rt){this.level=t??"error",this.levelValue=Ee.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new lr(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===Ee.levels.values.error?console.error(t):r===Ee.levels.values.warn?console.warn(t):r===Ee.levels.values.debug?console.debug(t):r===Ee.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(_e({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new lr(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(_e({extraMetadata:t})),new Blob(r,{type:"application/json"})}};class hi{constructor(t,r=Rt){this.baseChunkLogger=new on(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class di{constructor(t,r=Rt){this.baseChunkLogger=new on(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var pi=Object.defineProperty,bi=Object.defineProperties,yi=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable,dr=(e,t,r)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ve=(e,t)=>{for(var r in t||(t={}))gi.call(t,r)&&dr(e,r,t[r]);if(hr)for(var r of hr(t))wi.call(t,r)&&dr(e,r,t[r]);return e},Ke=(e,t)=>bi(e,yi(t));function Jf(e){return Ke(Ve({},e),{level:(e==null?void 0:e.level)||fi.level})}function Di(e,t=Pe){return e[t]||""}function mi(e,t,r=Pe){return e[r]=t,e}function vi(e,t=Pe){let r="";return typeof e.bindings>"u"?r=Di(e,t):r=e.bindings().context||"",r}function Ei(e,t,r=Pe){const n=vi(e,r);return n.trim()?`${n}/${t}`:t}function Xf(e,t,r=Pe){const n=Ei(e,t,r),o=e.child({context:n});return mi(o,n,r)}function _i(e){var t,r;const n=new hi((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:nn(Ke(Ve({},e.opts),{level:"trace",browser:Ke(Ve({},(r=e.opts)==null?void 0:r.browser),{write:o=>n.write(o)})})),chunkLoggerController:n}}function Oi(e){var t;const r=new di((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:nn(Ke(Ve({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function Zf(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?_i(e):Oi(e)}function Ai(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function sn(e,...t){if(!Ai(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function pr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Si(e,t){sn(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const ve=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ft=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Fi(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function an(e){return typeof e=="string"&&(e=Fi(e)),sn(e),e}class Ci{clone(){return this._cloneInto()}}function xi(e){const t=n=>e().update(an(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function un(e=32){if(ve&&typeof ve.getRandomValues=="function")return ve.getRandomValues(new Uint8Array(e));if(ve&&typeof ve.randomBytes=="function")return ve.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function Bi(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),u=Number(r>>o&i),f=Number(r&i),c=n?4:0,s=n?0:4;e.setUint32(t+c,u,n),e.setUint32(t+s,f,n)}class Ti extends Ci{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ft(this.buffer)}update(t){pr(this);const{view:r,buffer:n,blockLen:o}=this;t=an(t);const i=t.length;for(let u=0;u<i;){const f=Math.min(o-this.pos,i-u);if(f===o){const c=ft(t);for(;o<=i-u;u+=o)this.process(c,u);continue}n.set(t.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){pr(this),Si(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:o,isLE:i}=this;let{pos:u}=this;r[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(n,0),u=0);for(let l=u;l<o;l++)r[l]=0;Bi(n,o-8,BigInt(this.length*8),i),this.process(n,0);const f=ft(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=c/4,a=this.get();if(s>a.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<s;l++)f.setUint32(4*l,a[l],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:o,finished:i,destroyed:u,pos:f}=this;return t.length=o,t.pos=f,t.finished=i,t.destroyed=u,o%r&&t.buffer.set(n),t}}const $e=BigInt(2**32-1),_t=BigInt(32);function cn(e,t=!1){return t?{h:Number(e&$e),l:Number(e>>_t&$e)}:{h:Number(e>>_t&$e)|0,l:Number(e&$e)|0}}function Ii(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:u}=cn(e[o],t);[r[o],n[o]]=[i,u]}return[r,n]}const Ri=(e,t)=>BigInt(e>>>0)<<_t|BigInt(t>>>0),Pi=(e,t,r)=>e>>>r,Ni=(e,t,r)=>e<<32-r|t>>>r,Ui=(e,t,r)=>e>>>r|t<<32-r,ji=(e,t,r)=>e<<32-r|t>>>r,Li=(e,t,r)=>e<<64-r|t>>>r-32,Mi=(e,t,r)=>e>>>r-32|t<<64-r,zi=(e,t)=>t,$i=(e,t)=>e,Wi=(e,t,r)=>e<<r|t>>>32-r,ki=(e,t,r)=>t<<r|e>>>32-r,Hi=(e,t,r)=>t<<r-32|e>>>64-r,qi=(e,t,r)=>e<<r-32|t>>>64-r;function Vi(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}const Ki=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Yi=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Gi=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Ji=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,Xi=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Zi=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0,x={fromBig:cn,split:Ii,toBig:Ri,shrSH:Pi,shrSL:Ni,rotrSH:Ui,rotrSL:ji,rotrBH:Li,rotrBL:Mi,rotr32H:zi,rotr32L:$i,rotlSH:Wi,rotlSL:ki,rotlBH:Hi,rotlBL:qi,add:Vi,add3L:Ki,add3H:Yi,add4L:Gi,add4H:Ji,add5H:Zi,add5L:Xi},[Qi,es]=x.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ce=new Uint32Array(80),fe=new Uint32Array(80);class ts extends Ti{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:o,Ch:i,Cl:u,Dh:f,Dl:c,Eh:s,El:a,Fh:l,Fl:d,Gh:y,Gl:p,Hh:g,Hl:m}=this;return[t,r,n,o,i,u,f,c,s,a,l,d,y,p,g,m]}set(t,r,n,o,i,u,f,c,s,a,l,d,y,p,g,m){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=u|0,this.Dh=f|0,this.Dl=c|0,this.Eh=s|0,this.El=a|0,this.Fh=l|0,this.Fl=d|0,this.Gh=y|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(t,r){for(let w=0;w<16;w++,r+=4)ce[w]=t.getUint32(r),fe[w]=t.getUint32(r+=4);for(let w=16;w<80;w++){const O=ce[w-15]|0,F=fe[w-15]|0,P=x.rotrSH(O,F,1)^x.rotrSH(O,F,8)^x.shrSH(O,F,7),I=x.rotrSL(O,F,1)^x.rotrSL(O,F,8)^x.shrSL(O,F,7),B=ce[w-2]|0,T=fe[w-2]|0,ae=x.rotrSH(B,T,19)^x.rotrBH(B,T,61)^x.shrSH(B,T,6),ee=x.rotrSL(B,T,19)^x.rotrBL(B,T,61)^x.shrSL(B,T,6),$=x.add4L(I,ee,fe[w-7],fe[w-16]),le=x.add4H($,P,ae,ce[w-7],ce[w-16]);ce[w]=le|0,fe[w]=$|0}let{Ah:n,Al:o,Bh:i,Bl:u,Ch:f,Cl:c,Dh:s,Dl:a,Eh:l,El:d,Fh:y,Fl:p,Gh:g,Gl:m,Hh:_,Hl:S}=this;for(let w=0;w<80;w++){const O=x.rotrSH(l,d,14)^x.rotrSH(l,d,18)^x.rotrBH(l,d,41),F=x.rotrSL(l,d,14)^x.rotrSL(l,d,18)^x.rotrBL(l,d,41),P=l&y^~l&g,I=d&p^~d&m,B=x.add5L(S,F,I,es[w],fe[w]),T=x.add5H(B,_,O,P,Qi[w],ce[w]),ae=B|0,ee=x.rotrSH(n,o,28)^x.rotrBH(n,o,34)^x.rotrBH(n,o,39),$=x.rotrSL(n,o,28)^x.rotrBL(n,o,34)^x.rotrBL(n,o,39),le=n&i^n&f^i&f,he=o&u^o&c^u&c;_=g|0,S=m|0,g=y|0,m=p|0,y=l|0,p=d|0,{h:l,l:d}=x.add(s|0,a|0,T|0,ae|0),s=f|0,a=c|0,f=i|0,c=u|0,i=n|0,u=o|0;const h=x.add3L(ae,$,he);n=x.add3H(h,T,ee,le),o=h|0}({h:n,l:o}=x.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:u}=x.add(this.Bh|0,this.Bl|0,i|0,u|0),{h:f,l:c}=x.add(this.Ch|0,this.Cl|0,f|0,c|0),{h:s,l:a}=x.add(this.Dh|0,this.Dl|0,s|0,a|0),{h:l,l:d}=x.add(this.Eh|0,this.El|0,l|0,d|0),{h:y,l:p}=x.add(this.Fh|0,this.Fl|0,y|0,p|0),{h:g,l:m}=x.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:_,l:S}=x.add(this.Hh|0,this.Hl|0,_|0,S|0),this.set(n,o,i,u,f,c,s,a,l,d,y,p,g,m,_,S)}roundClean(){ce.fill(0),fe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rs=xi(()=>new ts);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pt=BigInt(0),fn=BigInt(1),ns=BigInt(2);function Nt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ut(e){if(!Nt(e))throw new Error("Uint8Array expected")}function lt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const os=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jt(e){Ut(e);let t="";for(let r=0;r<e.length;r++)t+=os[e[r]];return t}function ln(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Pt:BigInt("0x"+e)}const ne={_0:48,_9:57,A:65,F:70,a:97,f:102};function br(e){if(e>=ne._0&&e<=ne._9)return e-ne._0;if(e>=ne.A&&e<=ne.F)return e-(ne.A-10);if(e>=ne.a&&e<=ne.f)return e-(ne.a-10)}function hn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const u=br(e.charCodeAt(i)),f=br(e.charCodeAt(i+1));if(u===void 0||f===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[o]=u*16+f}return n}function is(e){return ln(jt(e))}function qe(e){return Ut(e),ln(jt(Uint8Array.from(e).reverse()))}function dn(e,t){return hn(e.toString(16).padStart(t*2,"0"))}function Ot(e,t){return dn(e,t).reverse()}function oe(e,t,r){let n;if(typeof t=="string")try{n=hn(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Nt(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}function yr(...e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];Ut(o),t+=o.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const i=e[n];r.set(i,o),o+=i.length}return r}const ht=e=>typeof e=="bigint"&&Pt<=e;function ss(e,t,r){return ht(e)&&ht(t)&&ht(r)&&t<=e&&e<r}function Ce(e,t,r,n){if(!ss(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function as(e){let t;for(t=0;e>Pt;e>>=fn,t+=1);return t}const us=e=>(ns<<BigInt(e-1))-fn,cs={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Nt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Lt(e,t,r={}){const n=(o,i,u)=>{const f=cs[i];if(typeof f!="function")throw new Error("invalid validator function");const c=e[o];if(!(u&&c===void 0)&&!f(c,e))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+c)};for(const[o,i]of Object.entries(t))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return e}function gr(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(o!==void 0)return o;const i=e(r,...n);return t.set(r,i),i}}const k=BigInt(0),M=BigInt(1),ye=BigInt(2),fs=BigInt(3),At=BigInt(4),wr=BigInt(5),Dr=BigInt(8);function z(e,t){const r=e%t;return r>=k?r:t+r}function ls(e,t,r){if(t<k)throw new Error("invalid exponent, negatives unsupported");if(r<=k)throw new Error("invalid modulus");if(r===M)return k;let n=M;for(;t>k;)t&M&&(n=n*e%r),e=e*e%r,t>>=M;return n}function X(e,t,r){let n=e;for(;t-- >k;)n*=n,n%=r;return n}function mr(e,t){if(e===k)throw new Error("invert: expected non-zero number");if(t<=k)throw new Error("invert: expected positive modulus, got "+t);let r=z(e,t),n=t,o=k,i=M;for(;r!==k;){const u=n/r,f=n%r,c=o-i*u;n=r,r=f,o=i,i=c}if(n!==M)throw new Error("invert: does not exist");return z(o,t)}function hs(e){const t=(e-M)/ye;let r,n,o;for(r=e-M,n=0;r%ye===k;r/=ye,n++);for(o=ye;o<e&&ls(o,t,e)!==e-M;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const u=(e+M)/At;return function(f,c){const s=f.pow(c,u);if(!f.eql(f.sqr(s),c))throw new Error("Cannot find square root");return s}}const i=(r+M)/ye;return function(u,f){if(u.pow(f,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let c=n,s=u.pow(u.mul(u.ONE,o),r),a=u.pow(f,i),l=u.pow(f,r);for(;!u.eql(l,u.ONE);){if(u.eql(l,u.ZERO))return u.ZERO;let d=1;for(let p=u.sqr(l);d<c&&!u.eql(p,u.ONE);d++)p=u.sqr(p);const y=u.pow(s,M<<BigInt(c-d-1));s=u.sqr(y),a=u.mul(a,y),l=u.mul(l,s),c=d}return a}}function ds(e){if(e%At===fs){const t=(e+M)/At;return function(r,n){const o=r.pow(n,t);if(!r.eql(r.sqr(o),n))throw new Error("Cannot find square root");return o}}if(e%Dr===wr){const t=(e-wr)/Dr;return function(r,n){const o=r.mul(n,ye),i=r.pow(o,t),u=r.mul(n,i),f=r.mul(r.mul(u,ye),i),c=r.mul(u,r.sub(f,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return hs(e)}const ps=(e,t)=>(z(e,t)&M)===M,bs=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ys(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=bs.reduce((n,o)=>(n[o]="function",n),t);return Lt(e,r)}function gs(e,t,r){if(r<k)throw new Error("invalid exponent, negatives unsupported");if(r===k)return e.ONE;if(r===M)return t;let n=e.ONE,o=t;for(;r>k;)r&M&&(n=e.mul(n,o)),o=e.sqr(o),r>>=M;return n}function ws(e,t){const r=new Array(t.length),n=t.reduce((i,u,f)=>e.is0(u)?i:(r[f]=i,e.mul(i,u)),e.ONE),o=e.inv(n);return t.reduceRight((i,u,f)=>e.is0(u)?i:(r[f]=e.mul(i,r[f]),e.mul(i,u)),o),r}function pn(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function bn(e,t,r=!1,n={}){if(e<=k)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:i}=pn(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:i,MASK:us(o),ZERO:k,ONE:M,create:c=>z(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return k<=c&&c<e},is0:c=>c===k,isOdd:c=>(c&M)===M,neg:c=>z(-c,e),eql:(c,s)=>c===s,sqr:c=>z(c*c,e),add:(c,s)=>z(c+s,e),sub:(c,s)=>z(c-s,e),mul:(c,s)=>z(c*s,e),pow:(c,s)=>gs(f,c,s),div:(c,s)=>z(c*mr(s,e),e),sqrN:c=>c*c,addN:(c,s)=>c+s,subN:(c,s)=>c-s,mulN:(c,s)=>c*s,inv:c=>mr(c,e),sqrt:n.sqrt||(c=>(u||(u=ds(e)),u(f,c))),invertBatch:c=>ws(f,c),cmov:(c,s,a)=>a?s:c,toBytes:c=>r?Ot(c,i):dn(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?qe(c):is(c)}});return Object.freeze(f)}const vr=BigInt(0),We=BigInt(1);function dt(e,t){const r=t.negate();return e?r:t}function yn(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function pt(e,t){yn(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function Ds(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function ms(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const bt=new WeakMap,gn=new WeakMap;function yt(e){return gn.get(e)||1}function vs(e,t){return{constTimeNegate:dt,hasPrecomputes(r){return yt(r)!==1},unsafeLadder(r,n,o=e.ZERO){let i=r;for(;n>vr;)n&We&&(o=o.add(i)),i=i.double(),n>>=We;return o},precomputeWindow(r,n){const{windows:o,windowSize:i}=pt(n,t),u=[];let f=r,c=f;for(let s=0;s<o;s++){c=f,u.push(c);for(let a=1;a<i;a++)c=c.add(f),u.push(c);f=c.double()}return u},wNAF(r,n,o){const{windows:i,windowSize:u}=pt(r,t);let f=e.ZERO,c=e.BASE;const s=BigInt(2**r-1),a=2**r,l=BigInt(r);for(let d=0;d<i;d++){const y=d*u;let p=Number(o&s);o>>=l,p>u&&(p-=a,o+=We);const g=y,m=y+Math.abs(p)-1,_=d%2!==0,S=p<0;p===0?c=c.add(dt(_,n[g])):f=f.add(dt(S,n[m]))}return{p:f,f:c}},wNAFUnsafe(r,n,o,i=e.ZERO){const{windows:u,windowSize:f}=pt(r,t),c=BigInt(2**r-1),s=2**r,a=BigInt(r);for(let l=0;l<u;l++){const d=l*f;if(o===vr)break;let y=Number(o&c);if(o>>=a,y>f&&(y-=s,o+=We),y===0)continue;let p=n[d+Math.abs(y)-1];y<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,o){let i=bt.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&bt.set(n,o(i))),i},wNAFCached(r,n,o){const i=yt(r);return this.wNAF(i,this.getPrecomputes(i,r,o),n)},wNAFCachedUnsafe(r,n,o,i){const u=yt(r);return u===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(u,this.getPrecomputes(u,r,o),n,i)},setWindowSize(r,n){yn(n,t),gn.set(r,n),bt.delete(r)}}}function Es(e,t,r,n){if(Ds(r,e),ms(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,i=as(BigInt(r.length)),u=i>12?i-3:i>4?i-2:i?2:1,f=(1<<u)-1,c=new Array(f+1).fill(o),s=Math.floor((t.BITS-1)/u)*u;let a=o;for(let l=s;l>=0;l-=u){c.fill(o);for(let y=0;y<n.length;y++){const p=n[y],g=Number(p>>BigInt(l)&BigInt(f));c[g]=c[g].add(r[y])}let d=o;for(let y=c.length-1,p=o;y>0;y--)p=p.add(c[y]),d=d.add(p);if(a=a.add(d),l!==0)for(let y=0;y<u;y++)a=a.double()}return a}function _s(e){return ys(e.Fp),Lt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const J=BigInt(0),K=BigInt(1),ke=BigInt(2),Os=BigInt(8),As={zip215:!0};function Ss(e){const t=_s(e);return Lt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Fs(e){const t=Ss(e),{Fp:r,n,prehash:o,hash:i,randomBytes:u,nByteLength:f,h:c}=t,s=ke<<BigInt(f*8)-K,a=r.create,l=bn(t.n,t.nBitLength),d=t.uvRatio||((h,b)=>{try{return{isValid:!0,value:r.sqrt(h*r.inv(b))}}catch{return{isValid:!1,value:J}}}),y=t.adjustScalarBytes||(h=>h),p=t.domain||((h,b,D)=>{if(lt("phflag",D),b.length||D)throw new Error("Contexts/pre-hash are not supported");return h});function g(h,b){Ce("coordinate "+h,b,J,s)}function m(h){if(!(h instanceof w))throw new Error("ExtendedPoint expected")}const _=gr((h,b)=>{const{ex:D,ey:v,ez:A}=h,E=h.is0();b==null&&(b=E?Os:r.inv(A));const R=a(D*b),U=a(v*b),N=a(A*b);if(E)return{x:J,y:K};if(N!==K)throw new Error("invZ was invalid");return{x:R,y:U}}),S=gr(h=>{const{a:b,d:D}=t;if(h.is0())throw new Error("bad point: ZERO");const{ex:v,ey:A,ez:E,et:R}=h,U=a(v*v),N=a(A*A),C=a(E*E),L=a(C*C),V=a(U*b),te=a(C*a(V+N)),re=a(L+a(D*a(U*N)));if(te!==re)throw new Error("bad point: equation left != right (1)");const G=a(v*A),ue=a(E*R);if(G!==ue)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(b,D,v,A){this.ex=b,this.ey=D,this.ez=v,this.et=A,g("x",b),g("y",D),g("z",v),g("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof w)throw new Error("extended point not allowed");const{x:D,y:v}=b||{};return g("x",D),g("y",v),new w(D,v,K,a(D*v))}static normalizeZ(b){const D=r.invertBatch(b.map(v=>v.ez));return b.map((v,A)=>v.toAffine(D[A])).map(w.fromAffine)}static msm(b,D){return Es(w,l,b,D)}_setWindowSize(b){P.setWindowSize(this,b)}assertValidity(){S(this)}equals(b){m(b);const{ex:D,ey:v,ez:A}=this,{ex:E,ey:R,ez:U}=b,N=a(D*U),C=a(E*A),L=a(v*U),V=a(R*A);return N===C&&L===V}is0(){return this.equals(w.ZERO)}negate(){return new w(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:b}=t,{ex:D,ey:v,ez:A}=this,E=a(D*D),R=a(v*v),U=a(ke*a(A*A)),N=a(b*E),C=D+v,L=a(a(C*C)-E-R),V=N+R,te=V-U,re=N-R,G=a(L*te),ue=a(V*re),de=a(L*re),je=a(te*V);return new w(G,ue,je,de)}add(b){m(b);const{a:D,d:v}=t,{ex:A,ey:E,ez:R,et:U}=this,{ex:N,ey:C,ez:L,et:V}=b;if(D===BigInt(-1)){const qt=a((E-A)*(C+N)),Vt=a((E+A)*(C-N)),ot=a(Vt-qt);if(ot===J)return this.double();const Kt=a(R*ke*V),Yt=a(U*ke*L),Gt=Yt+Kt,Jt=Vt+qt,Xt=Yt-Kt,Jn=a(Gt*ot),Xn=a(Jt*Xt),Zn=a(Gt*Xt),Qn=a(ot*Jt);return new w(Jn,Xn,Qn,Zn)}const te=a(A*N),re=a(E*C),G=a(U*v*V),ue=a(R*L),de=a((A+E)*(N+C)-te-re),je=ue-G,kt=ue+G,Ht=a(re-D*te),Vn=a(de*je),Kn=a(kt*Ht),Yn=a(de*Ht),Gn=a(je*kt);return new w(Vn,Kn,Gn,Yn)}subtract(b){return this.add(b.negate())}wNAF(b){return P.wNAFCached(this,b,w.normalizeZ)}multiply(b){const D=b;Ce("scalar",D,K,n);const{p:v,f:A}=this.wNAF(D);return w.normalizeZ([v,A])[0]}multiplyUnsafe(b,D=w.ZERO){const v=b;return Ce("scalar",v,J,n),v===J?F:this.is0()||v===K?this:P.wNAFCachedUnsafe(this,v,w.normalizeZ,D)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,n).is0()}toAffine(b){return _(this,b)}clearCofactor(){const{h:b}=t;return b===K?this:this.multiplyUnsafe(b)}static fromHex(b,D=!1){const{d:v,a:A}=t,E=r.BYTES;b=oe("pointHex",b,E),lt("zip215",D);const R=b.slice(),U=b[E-1];R[E-1]=U&-129;const N=qe(R),C=D?s:r.ORDER;Ce("pointHex.y",N,J,C);const L=a(N*N),V=a(L-K),te=a(v*L-A);let{isValid:re,value:G}=d(V,te);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const ue=(G&K)===K,de=(U&128)!==0;if(!D&&G===J&&de)throw new Error("Point.fromHex: x=0 and x_0=1");return de!==ue&&(G=a(-G)),w.fromAffine({x:G,y:N})}static fromPrivateKey(b){return T(b).point}toRawBytes(){const{x:b,y:D}=this.toAffine(),v=Ot(D,r.BYTES);return v[v.length-1]|=b&K?128:0,v}toHex(){return jt(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,K,a(t.Gx*t.Gy)),w.ZERO=new w(J,K,K,J);const{BASE:O,ZERO:F}=w,P=vs(w,f*8);function I(h){return z(h,n)}function B(h){return I(qe(h))}function T(h){const b=r.BYTES;h=oe("private key",h,b);const D=oe("hashed private key",i(h),2*b),v=y(D.slice(0,b)),A=D.slice(b,2*b),E=B(v),R=O.multiply(E),U=R.toRawBytes();return{head:v,prefix:A,scalar:E,point:R,pointBytes:U}}function ae(h){return T(h).pointBytes}function ee(h=new Uint8Array,...b){const D=yr(...b);return B(i(p(D,oe("context",h),!!o)))}function $(h,b,D={}){h=oe("message",h),o&&(h=o(h));const{prefix:v,scalar:A,pointBytes:E}=T(b),R=ee(D.context,v,h),U=O.multiply(R).toRawBytes(),N=ee(D.context,U,E,h),C=I(R+N*A);Ce("signature.s",C,J,n);const L=yr(U,Ot(C,r.BYTES));return oe("result",L,r.BYTES*2)}const le=As;function he(h,b,D,v=le){const{context:A,zip215:E}=v,R=r.BYTES;h=oe("signature",h,2*R),b=oe("message",b),D=oe("publicKey",D,R),E!==void 0&&lt("zip215",E),o&&(b=o(b));const U=qe(h.slice(R,2*R));let N,C,L;try{N=w.fromHex(D,E),C=w.fromHex(h.slice(0,R),E),L=O.multiplyUnsafe(U)}catch{return!1}if(!E&&N.isSmallOrder())return!1;const V=ee(A,C.toRawBytes(),N.toRawBytes(),b);return C.add(N.multiplyUnsafe(V)).subtract(L).clearCofactor().equals(w.ZERO)}return O._setWindowSize(8),{CURVE:t,getPublicKey:ae,sign:$,verify:he,ExtendedPoint:w,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>u(r.BYTES),precompute(h=8,b=w.BASE){return b._setWindowSize(h),b.multiply(BigInt(3)),b}}}}BigInt(0),BigInt(1);const Mt=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Er=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Cs=BigInt(1),_r=BigInt(2);BigInt(3);const xs=BigInt(5),Bs=BigInt(8);function Ts(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=Mt,u=e*e%i*e%i,f=X(u,_r,i)*u%i,c=X(f,Cs,i)*e%i,s=X(c,xs,i)*c%i,a=X(s,t,i)*s%i,l=X(a,r,i)*a%i,d=X(l,n,i)*l%i,y=X(d,o,i)*d%i,p=X(y,o,i)*d%i,g=X(p,t,i)*s%i;return{pow_p_5_8:X(g,_r,i)*e%i,b2:u}}function Is(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Rs(e,t){const r=Mt,n=z(t*t*t,r),o=z(n*n*t,r),i=Ts(e*o).pow_p_5_8;let u=z(e*n*i,r);const f=z(t*u*u,r),c=u,s=z(u*Er,r),a=f===e,l=f===z(-e,r),d=f===z(-e*Er,r);return a&&(u=c),(l||d)&&(u=s),ps(u,r)&&(u=z(-u,r)),{isValid:a||l,value:u}}const Ps=bn(Mt,void 0,!0),Ns={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ps,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Bs,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rs,randomBytes:un,adjustScalarBytes:Is,uvRatio:Rs},wn=Fs(Ns),Us="EdDSA",js="JWT",Ye=".",et="base64url",Dn="utf8",mn="utf8",Ls=":",Ms="did",zs="key",Or="base58btc",$s="z",Ws="K36",ks=32;function zt(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function vn(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zt(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function En(e,t){t||(t=e.reduce((o,i)=>o+i.length,0));const r=vn(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return zt(r)}function Hs(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),u=i.charCodeAt(0);if(r[u]!==255)throw new TypeError(i+" is ambiguous");r[u]=o}var f=e.length,c=e.charAt(0),s=Math.log(f)/Math.log(256),a=Math.log(256)/Math.log(f);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,_=0,S=p.length;_!==S&&p[_]===0;)_++,g++;for(var w=(S-_)*a+1>>>0,O=new Uint8Array(w);_!==S;){for(var F=p[_],P=0,I=w-1;(F!==0||P<m)&&I!==-1;I--,P++)F+=256*O[I]>>>0,O[I]=F%f>>>0,F=F/f>>>0;if(F!==0)throw new Error("Non-zero carry");m=P,_++}for(var B=w-m;B!==w&&O[B]===0;)B++;for(var T=c.repeat(g);B<w;++B)T+=e.charAt(O[B]);return T}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,_=0;p[g]===c;)m++,g++;for(var S=(p.length-g)*s+1>>>0,w=new Uint8Array(S);p[g];){var O=r[p.charCodeAt(g)];if(O===255)return;for(var F=0,P=S-1;(O!==0||F<_)&&P!==-1;P--,F++)O+=f*w[P]>>>0,w[P]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");_=F,g++}if(p[g]!==" "){for(var I=S-_;I!==S&&w[I]===0;)I++;for(var B=new Uint8Array(m+(S-I)),T=m;I!==S;)B[T++]=w[I++];return B}}}function y(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:y}}var qs=Hs,Vs=qs;const _n=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ks=e=>new TextEncoder().encode(e),Ys=e=>new TextDecoder().decode(e);class Gs{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Js{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return On(this,t)}}class Xs{constructor(t){this.decoders=t}or(t){return On(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const On=(e,t)=>new Xs({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Zs{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Gs(t,r,n),this.decoder=new Js(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const tt=({name:e,prefix:t,encode:r,decode:n})=>new Zs(e,t,r,n),Ne=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=Vs(r,t);return tt({prefix:e,name:t,encode:n,decode:i=>_n(o(i))})},Qs=(e,t,r,n)=>{const o={};for(let a=0;a<t.length;++a)o[t[a]]=a;let i=e.length;for(;e[i-1]==="=";)--i;const u=new Uint8Array(i*r/8|0);let f=0,c=0,s=0;for(let a=0;a<i;++a){const l=o[e[a]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,f+=r,f>=8&&(f-=8,u[s++]=255&c>>f)}if(f>=r||255&c<<8-f)throw new SyntaxError("Unexpected end of data");return u},ea=(e,t,r)=>{const n=t[t.length-1]==="=",o=(1<<r)-1;let i="",u=0,f=0;for(let c=0;c<e.length;++c)for(f=f<<8|e[c],u+=8;u>r;)u-=r,i+=t[o&f>>u];if(u&&(i+=t[o&f<<r-u]),n)for(;i.length*r&7;)i+="=";return i},H=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>tt({prefix:t,name:e,encode(o){return ea(o,n,r)},decode(o){return Qs(o,n,r,e)}}),ta=tt({prefix:"\0",name:"identity",encode:e=>Ys(e),decode:e=>Ks(e)});var ra=Object.freeze({__proto__:null,identity:ta});const na=H({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var oa=Object.freeze({__proto__:null,base2:na});const ia=H({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var sa=Object.freeze({__proto__:null,base8:ia});const aa=Ne({prefix:"9",name:"base10",alphabet:"0123456789"});var ua=Object.freeze({__proto__:null,base10:aa});const ca=H({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fa=H({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var la=Object.freeze({__proto__:null,base16:ca,base16upper:fa});const ha=H({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),da=H({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pa=H({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ba=H({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ya=H({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ga=H({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wa=H({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Da=H({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ma=H({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var va=Object.freeze({__proto__:null,base32:ha,base32upper:da,base32pad:pa,base32padupper:ba,base32hex:ya,base32hexupper:ga,base32hexpad:wa,base32hexpadupper:Da,base32z:ma});const Ea=Ne({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_a=Ne({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oa=Object.freeze({__proto__:null,base36:Ea,base36upper:_a});const Aa=Ne({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sa=Ne({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fa=Object.freeze({__proto__:null,base58btc:Aa,base58flickr:Sa});const Ca=H({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xa=H({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ba=H({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ta=H({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ia=Object.freeze({__proto__:null,base64:Ca,base64pad:xa,base64url:Ba,base64urlpad:Ta});const An=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ra=An.reduce((e,t,r)=>(e[r]=t,e),[]),Pa=An.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Na(e){return e.reduce((t,r)=>(t+=Ra[r],t),"")}function Ua(e){const t=[];for(const r of e){const n=Pa[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const ja=tt({prefix:"🚀",name:"base256emoji",encode:Na,decode:Ua});var La=Object.freeze({__proto__:null,base256emoji:ja}),Ma=Sn,Ar=128,za=127,$a=~za,Wa=Math.pow(2,31);function Sn(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Wa;)t[r++]=e&255|Ar,e/=128;for(;e&$a;)t[r++]=e&255|Ar,e>>>=7;return t[r]=e|0,Sn.bytes=r-n+1,t}var ka=St,Ha=128,Sr=127;function St(e,n){var r=0,n=n||0,o=0,i=n,u,f=e.length;do{if(i>=f)throw St.bytes=0,new RangeError("Could not decode varint");u=e[i++],r+=o<28?(u&Sr)<<o:(u&Sr)*Math.pow(2,o),o+=7}while(u>=Ha);return St.bytes=i-n,r}var qa=Math.pow(2,7),Va=Math.pow(2,14),Ka=Math.pow(2,21),Ya=Math.pow(2,28),Ga=Math.pow(2,35),Ja=Math.pow(2,42),Xa=Math.pow(2,49),Za=Math.pow(2,56),Qa=Math.pow(2,63),eu=function(e){return e<qa?1:e<Va?2:e<Ka?3:e<Ya?4:e<Ga?5:e<Ja?6:e<Xa?7:e<Za?8:e<Qa?9:10},tu={encode:Ma,decode:ka,encodingLength:eu},Fn=tu;const Fr=(e,t,r=0)=>(Fn.encode(e,t,r),t),Cr=e=>Fn.encodingLength(e),Ft=(e,t)=>{const r=t.byteLength,n=Cr(e),o=n+Cr(r),i=new Uint8Array(o+r);return Fr(e,i,0),Fr(r,i,n),i.set(t,o),new ru(e,r,t,i)};class ru{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}}const Cn=({name:e,code:t,encode:r})=>new nu(e,t,r);class nu{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ft(this.code,r):r.then(n=>Ft(this.code,n))}else throw Error("Unknown type, must be binary type")}}const xn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ou=Cn({name:"sha2-256",code:18,encode:xn("SHA-256")}),iu=Cn({name:"sha2-512",code:19,encode:xn("SHA-512")});var su=Object.freeze({__proto__:null,sha256:ou,sha512:iu});const Bn=0,au="identity",Tn=_n,uu=e=>Ft(Bn,Tn(e)),cu={code:Bn,name:au,encode:Tn,digest:uu};var fu=Object.freeze({__proto__:null,identity:cu});new TextEncoder,new TextDecoder;const xr={...ra,...oa,...sa,...ua,...la,...va,...Oa,...Fa,...Ia,...La};({...su,...fu});function In(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Br=In("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),gt=In("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=vn(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Rn={utf8:Br,"utf-8":Br,hex:xr.base16,latin1:gt,ascii:gt,binary:gt,...xr};function rt(e,t="utf8"){const r=Rn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function Oe(e,t="utf8"){const r=Rn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zt(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Tr(e){return It(rt(Oe(e,et),Dn))}function Ge(e){return rt(Oe(_e(e),Dn),et)}function lu(e){const t=Oe(Ws,Or),r=$s+rt(En([t,e]),Or);return[Ms,zs,r].join(Ls)}function hu(e){return rt(e,et)}function du(e){return Oe(e,et)}function pu(e){return Oe([Ge(e.header),Ge(e.payload)].join(Ye),mn)}function bu(e){return[Ge(e.header),Ge(e.payload),hu(e.signature)].join(Ye)}function Qf(e){const t=e.split(Ye),r=Tr(t[0]),n=Tr(t[1]),o=du(t[2]),i=Oe(t.slice(0,2).join(Ye),mn);return{header:r,payload:n,signature:o,data:i}}function el(e=un(ks)){const t=wn.getPublicKey(e);return{secretKey:En([e,t]),publicKey:t}}async function tl(e,t,r,n,o=Xe.fromMiliseconds(Date.now())){const i={alg:Us,typ:js},u=lu(n.publicKey),f=o+r,c={iss:u,sub:e,aud:t,iat:o,exp:f},s=pu({header:i,payload:c}),a=wn.sign(s,n.secretKey.slice(0,32));return bu({header:i,payload:c,signature:a})}var Ir=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},yu=function(){function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}return e}(),gu=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),wu=function(){function e(t,r,n,o){this.name=t,this.version=r,this.os=n,this.bot=o,this.type="bot-device"}return e}(),Du=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),mu=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),vu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Eu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rr=3,_u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vu]],Pr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rl(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new mu:typeof navigator<"u"?Au(navigator.userAgent):Fu()}function Ou(e){return e!==""&&_u.reduce(function(t,r){var n=r[0],o=r[1];if(t)return t;var i=o.exec(e);return!!i&&[n,i]},!1)}function Au(e){var t=Ou(e);if(!t)return null;var r=t[0],n=t[1];if(r==="searchbot")return new Du;var o=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);o?o.length<Rr&&(o=Ir(Ir([],o,!0),Cu(Rr-o.length),!0)):o=[];var i=o.join("."),u=Su(e),f=Eu.exec(e);return f&&f[1]?new wu(r,i,u,f[1]):new yu(r,i,u)}function Su(e){for(var t=0,r=Pr.length;t<r;t++){var n=Pr[t],o=n[0],i=n[1],u=i.exec(e);if(u)return o}return null}function Fu(){var e=typeof process<"u"&&process.version;return e?new gu(process.version.slice(1)):null}function Cu(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var j={};Object.defineProperty(j,"__esModule",{value:!0});j.getLocalStorage=j.getLocalStorageOrThrow=j.getCrypto=j.getCryptoOrThrow=ju=j.getLocation=j.getLocationOrThrow=Pu=j.getNavigator=j.getNavigatorOrThrow=Tu=j.getDocument=j.getDocumentOrThrow=j.getFromWindowOrThrow=j.getFromWindow=void 0;function ge(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}j.getFromWindow=ge;function Ae(e){const t=ge(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}j.getFromWindowOrThrow=Ae;function xu(){return Ae("document")}j.getDocumentOrThrow=xu;function Bu(){return ge("document")}var Tu=j.getDocument=Bu;function Iu(){return Ae("navigator")}j.getNavigatorOrThrow=Iu;function Ru(){return ge("navigator")}var Pu=j.getNavigator=Ru;function Nu(){return Ae("location")}j.getLocationOrThrow=Nu;function Uu(){return ge("location")}var ju=j.getLocation=Uu;function Lu(){return Ae("crypto")}j.getCryptoOrThrow=Lu;function Mu(){return ge("crypto")}j.getCrypto=Mu;function zu(){return Ae("localStorage")}j.getLocalStorageOrThrow=zu;function $u(){return ge("localStorage")}j.getLocalStorage=$u;var $t={};Object.defineProperty($t,"__esModule",{value:!0});var Wu=$t.getWindowMetadata=void 0;const Nr=j;function ku(){let e,t;try{e=Nr.getDocumentOrThrow(),t=Nr.getLocationOrThrow()}catch{return null}function r(){const l=e.getElementsByTagName("link"),d=[];for(let y=0;y<l.length;y++){const p=l[y],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let _=t.protocol+"//"+t.host;if(m.indexOf("/")===0)_+=m;else{const S=t.pathname.split("/");S.pop();const w=S.join("/");_+=w+"/"+m}d.push(_)}else if(m.indexOf("//")===0){const _=t.protocol+m;d.push(_)}else d.push(m)}}return d}function n(...l){const d=e.getElementsByTagName("meta");for(let y=0;y<d.length;y++){const p=d[y],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?l.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function o(){let l=n("name","og:site_name","og:title","twitter:title");return l||(l=e.title),l}function i(){return n("description","og:description","twitter:description","keywords")}const u=o(),f=i(),c=t.origin,s=r();return{description:f,url:c,icons:s,name:u}}Wu=$t.getWindowMetadata=ku;function Hu(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let s=0;s<t.length;s++)t[s]=255;for(let s=0;s<e.length;s++){const a=e.charAt(s),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=s}const r=e.length,n=e.charAt(0),o=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function u(s){if(s instanceof Uint8Array||(ArrayBuffer.isView(s)?s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength):Array.isArray(s)&&(s=Uint8Array.from(s))),!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(s.length===0)return"";let a=0,l=0,d=0;const y=s.length;for(;d!==y&&s[d]===0;)d++,a++;const p=(y-d)*i+1>>>0,g=new Uint8Array(p);for(;d!==y;){let S=s[d],w=0;for(let O=p-1;(S!==0||w<l)&&O!==-1;O--,w++)S+=256*g[O]>>>0,g[O]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");l=w,d++}let m=p-l;for(;m!==p&&g[m]===0;)m++;let _=n.repeat(a);for(;m<p;++m)_+=e.charAt(g[m]);return _}function f(s){if(typeof s!="string")throw new TypeError("Expected String");if(s.length===0)return new Uint8Array;let a=0,l=0,d=0;for(;s[a]===n;)l++,a++;const y=(s.length-a)*o+1>>>0,p=new Uint8Array(y);for(;a<s.length;){const S=s.charCodeAt(a);if(S>255)return;let w=t[S];if(w===255)return;let O=0;for(let F=y-1;(w!==0||O<d)&&F!==-1;F--,O++)w+=r*p[F]>>>0,p[F]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");d=O,a++}let g=y-d;for(;g!==y&&p[g]===0;)g++;const m=new Uint8Array(l+(y-g));let _=l;for(;g!==y;)m[_++]=p[g++];return m}function c(s){const a=f(s);if(a)return a;throw new Error("Non-base"+r+" character")}return{encode:u,decodeUnsafe:f,decode:c}}var qu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const nl=Hu(qu);function Vu(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),u=i.charCodeAt(0);if(r[u]!==255)throw new TypeError(i+" is ambiguous");r[u]=o}var f=e.length,c=e.charAt(0),s=Math.log(f)/Math.log(256),a=Math.log(256)/Math.log(f);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,_=0,S=p.length;_!==S&&p[_]===0;)_++,g++;for(var w=(S-_)*a+1>>>0,O=new Uint8Array(w);_!==S;){for(var F=p[_],P=0,I=w-1;(F!==0||P<m)&&I!==-1;I--,P++)F+=256*O[I]>>>0,O[I]=F%f>>>0,F=F/f>>>0;if(F!==0)throw new Error("Non-zero carry");m=P,_++}for(var B=w-m;B!==w&&O[B]===0;)B++;for(var T=c.repeat(g);B<w;++B)T+=e.charAt(O[B]);return T}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,_=0;p[g]===c;)m++,g++;for(var S=(p.length-g)*s+1>>>0,w=new Uint8Array(S);p[g];){var O=r[p.charCodeAt(g)];if(O===255)return;for(var F=0,P=S-1;(O!==0||F<_)&&P!==-1;P--,F++)O+=f*w[P]>>>0,w[P]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");_=F,g++}if(p[g]!==" "){for(var I=S-_;I!==S&&w[I]===0;)I++;for(var B=new Uint8Array(m+(S-I)),T=m;I!==S;)B[T++]=w[I++];return B}}}function y(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:y}}var Ku=Vu,Yu=Ku;const Gu=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ju=e=>new TextEncoder().encode(e),Xu=e=>new TextDecoder().decode(e);class Zu{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Qu{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Pn(this,t)}}class ec{constructor(t){this.decoders=t}or(t){return Pn(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pn=(e,t)=>new ec({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class tc{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Zu(t,r,n),this.decoder=new Qu(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const nt=({name:e,prefix:t,encode:r,decode:n})=>new tc(e,t,r,n),Ue=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=Yu(r,t);return nt({prefix:e,name:t,encode:n,decode:i=>Gu(o(i))})},rc=(e,t,r,n)=>{const o={};for(let a=0;a<t.length;++a)o[t[a]]=a;let i=e.length;for(;e[i-1]==="=";)--i;const u=new Uint8Array(i*r/8|0);let f=0,c=0,s=0;for(let a=0;a<i;++a){const l=o[e[a]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,f+=r,f>=8&&(f-=8,u[s++]=255&c>>f)}if(f>=r||255&c<<8-f)throw new SyntaxError("Unexpected end of data");return u},nc=(e,t,r)=>{const n=t[t.length-1]==="=",o=(1<<r)-1;let i="",u=0,f=0;for(let c=0;c<e.length;++c)for(f=f<<8|e[c],u+=8;u>r;)u-=r,i+=t[o&f>>u];if(u&&(i+=t[o&f<<r-u]),n)for(;i.length*r&7;)i+="=";return i},q=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>nt({prefix:t,name:e,encode(o){return nc(o,n,r)},decode(o){return rc(o,n,r,e)}}),oc=nt({prefix:"\0",name:"identity",encode:e=>Xu(e),decode:e=>Ju(e)}),ic=Object.freeze(Object.defineProperty({__proto__:null,identity:oc},Symbol.toStringTag,{value:"Module"})),sc=q({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ac=Object.freeze(Object.defineProperty({__proto__:null,base2:sc},Symbol.toStringTag,{value:"Module"})),uc=q({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),cc=Object.freeze(Object.defineProperty({__proto__:null,base8:uc},Symbol.toStringTag,{value:"Module"})),fc=Ue({prefix:"9",name:"base10",alphabet:"0123456789"}),lc=Object.freeze(Object.defineProperty({__proto__:null,base10:fc},Symbol.toStringTag,{value:"Module"})),hc=q({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dc=q({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),pc=Object.freeze(Object.defineProperty({__proto__:null,base16:hc,base16upper:dc},Symbol.toStringTag,{value:"Module"})),bc=q({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yc=q({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gc=q({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),wc=q({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Dc=q({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mc=q({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vc=q({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ec=q({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_c=q({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Oc=Object.freeze(Object.defineProperty({__proto__:null,base32:bc,base32hex:Dc,base32hexpad:vc,base32hexpadupper:Ec,base32hexupper:mc,base32pad:gc,base32padupper:wc,base32upper:yc,base32z:_c},Symbol.toStringTag,{value:"Module"})),Ac=Ue({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sc=Ue({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Fc=Object.freeze(Object.defineProperty({__proto__:null,base36:Ac,base36upper:Sc},Symbol.toStringTag,{value:"Module"})),Cc=Ue({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xc=Ue({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Bc=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Cc,base58flickr:xc},Symbol.toStringTag,{value:"Module"})),Tc=q({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ic=q({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rc=q({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pc=q({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Nc=Object.freeze(Object.defineProperty({__proto__:null,base64:Tc,base64pad:Ic,base64url:Rc,base64urlpad:Pc},Symbol.toStringTag,{value:"Module"})),Nn=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Uc=Nn.reduce((e,t,r)=>(e[r]=t,e),[]),jc=Nn.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Lc(e){return e.reduce((t,r)=>(t+=Uc[r],t),"")}function Mc(e){const t=[];for(const r of e){const n=jc[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const zc=nt({prefix:"🚀",name:"base256emoji",encode:Lc,decode:Mc}),$c=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:zc},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ol={...ic,...ac,...cc,...lc,...pc,...Oc,...Fc,...Bc,...Nc,...$c},il={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Wc="PARSE_ERROR",kc="INVALID_REQUEST",Hc="METHOD_NOT_FOUND",qc="INVALID_PARAMS",Un="INTERNAL_ERROR",Wt="SERVER_ERROR",Vc=[-32700,-32600,-32601,-32602,-32603],xe={[Wc]:{code:-32700,message:"Parse error"},[kc]:{code:-32600,message:"Invalid Request"},[Hc]:{code:-32601,message:"Method not found"},[qc]:{code:-32602,message:"Invalid params"},[Un]:{code:-32603,message:"Internal error"},[Wt]:{code:-32e3,message:"Server error"}},jn=Wt;function Kc(e){return Vc.includes(e)}function Ur(e){return Object.keys(xe).includes(e)?xe[e]:xe[jn]}function Yc(e){const t=Object.values(xe).find(r=>r.code===e);return t||xe[jn]}function Ln(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Mn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ct=function(e,t){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Ct(e,t)};function Gc(e,t){Ct(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var xt=function(){return xt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xt.apply(this,arguments)};function Jc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Xc(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(i=(o<3?u(i):o>3?u(t,r,i):u(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function Zc(e,t){return function(r,n){t(r,n,e)}}function Qc(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ef(e,t,r,n){function o(i){return i instanceof r?i:new r(function(u){u(i)})}return new(r||(r=Promise))(function(i,u){function f(a){try{s(n.next(a))}catch(l){u(l)}}function c(a){try{s(n.throw(a))}catch(l){u(l)}}function s(a){a.done?i(a.value):o(a.value).then(f,c)}s((n=n.apply(e,t||[])).next())})}function tf(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(s){return function(a){return c([s,a])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function rf(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function nf(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Bt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zn(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],u;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return i}function of(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zn(arguments[t]));return e}function sf(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],u=0,f=i.length;u<f;u++,o++)n[o]=i[u];return n}function Re(e){return this instanceof Re?(this.v=e,this):new Re(e)}function af(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(d){n[d]&&(o[d]=function(y){return new Promise(function(p,g){i.push([d,y,p,g])>1||f(d,y)})})}function f(d,y){try{c(n[d](y))}catch(p){l(i[0][3],p)}}function c(d){d.value instanceof Re?Promise.resolve(d.value.v).then(s,a):l(i[0][2],d)}function s(d){f("next",d)}function a(d){f("throw",d)}function l(d,y){d(y),i.shift(),i.length&&f(i[0][0],i[0][1])}}function uf(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,i){t[o]=e[o]?function(u){return(r=!r)?{value:Re(e[o](u)),done:o==="return"}:i?i(u):u}:i}}function cf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Bt=="function"?Bt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(u){return new Promise(function(f,c){u=e[i](u),o(f,c,u.done,u.value)})}}function o(i,u,f,c){Promise.resolve(c).then(function(s){i({value:s,done:f})},u)}}function ff(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function lf(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function hf(e){return e&&e.__esModule?e:{default:e}}function df(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function pf(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const bf=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xt},__asyncDelegator:uf,__asyncGenerator:af,__asyncValues:cf,__await:Re,__awaiter:ef,__classPrivateFieldGet:df,__classPrivateFieldSet:pf,__createBinding:rf,__decorate:Xc,__exportStar:nf,__extends:Gc,__generator:tf,__importDefault:hf,__importStar:lf,__makeTemplateObject:ff,__metadata:Qc,__param:Zc,__read:zn,__rest:Jc,__spread:of,__spreadArrays:sf,__values:Bt},Symbol.toStringTag,{value:"Module"})),yf=Jr(bf);var ie={},jr;function gf(){if(jr)return ie;jr=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.isBrowserCryptoAvailable=ie.getSubtleCrypto=ie.getBrowerCrypto=void 0;function e(){return(Z===null||Z===void 0?void 0:Z.crypto)||(Z===null||Z===void 0?void 0:Z.msCrypto)||{}}ie.getBrowerCrypto=e;function t(){const n=e();return n.subtle||n.webkitSubtle}ie.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return ie.isBrowserCryptoAvailable=r,ie}var se={},Lr;function wf(){if(Lr)return se;Lr=1,Object.defineProperty(se,"__esModule",{value:!0}),se.isBrowser=se.isNode=se.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}se.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}se.isNode=t;function r(){return!e()&&!t()}return se.isBrowser=r,se}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=yf;t.__exportStar(gf(),e),t.__exportStar(wf(),e)})(Mn);function $n(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function Df(e=6){return BigInt($n(e))}function mf(e,t,r){return{id:r||$n(),jsonrpc:"2.0",method:e,params:t}}function sl(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Wn(e,t,r){return{id:e,jsonrpc:"2.0",error:vf(t)}}function vf(e,t){return typeof e>"u"?Ur(Un):(typeof e=="string"&&(e=Object.assign(Object.assign({},Ur(Wt)),{message:e})),Kc(e.code)&&(e=Yc(e.code)),e)}class Ef{}class _f extends Ef{constructor(){super()}}class Of extends _f{constructor(t){super()}}const Af="^https?:",Sf="^wss?:";function Ff(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function kn(e,t){const r=Ff(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function Mr(e){return kn(e,Af)}function zr(e){return kn(e,Sf)}function Cf(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function Hn(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function al(e){return Hn(e)&&"method"in e}function xf(e){return Hn(e)&&(Bf(e)||qn(e))}function Bf(e){return"result"in e}function qn(e){return"error"in e}let ul=class extends Of{constructor(t){super(t),this.events=new Je.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(mf(t.method,t.params||[],t.id||Df().toString()),r)}async requestStrict(t,r){return new Promise(async(n,o)=>{if(!this.connection.connected)try{await this.open()}catch(i){o(i)}this.events.on(`${t.id}`,i=>{qn(i)?o(i.error):n(i.result)});try{await this.connection.send(t,r)}catch(i){o(i)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),xf(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Tf=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),If=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$r=e=>e.split("?")[0],Wr=10,Rf=Tf();let fl=class{constructor(t){if(this.url=t,this.events=new Je.EventEmitter,this.registering=!1,!zr(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_e(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!zr(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{const o=Mn.isReactNative()?void 0:{rejectUnauthorized:!Cf(t)},i=new Rf(t,[],o);If()?i.onerror=u=>{const f=u;n(this.emitError(f.error))}:i.on("error",u=>{n(this.emitError(u))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?It(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),o=n.message||n.toString(),i=Wn(t,o);this.events.emit("payload",i)}parseError(t,r=this.url){return Ln(t,$r(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Wr&&this.events.setMaxListeners(Wr)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${$r(this.url)}`));return this.events.emit("register_error",r),r}};var Tt={exports:{}};(function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Z<"u"&&Z,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(u){var f=typeof i<"u"&&i||typeof self<"u"&&self||typeof Z<"u"&&Z||{},c={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function s(h){return h&&DataView.prototype.isPrototypeOf(h)}if(c.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(h){return h&&a.indexOf(Object.prototype.toString.call(h))>-1};function d(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function y(h){return typeof h!="string"&&(h=String(h)),h}function p(h){var b={next:function(){var D=h.shift();return{done:D===void 0,value:D}}};return c.iterable&&(b[Symbol.iterator]=function(){return b}),b}function g(h){this.map={},h instanceof g?h.forEach(function(b,D){this.append(D,b)},this):Array.isArray(h)?h.forEach(function(b){if(b.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(b){this.append(b,h[b])},this)}g.prototype.append=function(h,b){h=d(h),b=y(b);var D=this.map[h];this.map[h]=D?D+", "+b:b},g.prototype.delete=function(h){delete this.map[d(h)]},g.prototype.get=function(h){return h=d(h),this.has(h)?this.map[h]:null},g.prototype.has=function(h){return this.map.hasOwnProperty(d(h))},g.prototype.set=function(h,b){this.map[d(h)]=y(b)},g.prototype.forEach=function(h,b){for(var D in this.map)this.map.hasOwnProperty(D)&&h.call(b,this.map[D],D,this)},g.prototype.keys=function(){var h=[];return this.forEach(function(b,D){h.push(D)}),p(h)},g.prototype.values=function(){var h=[];return this.forEach(function(b){h.push(b)}),p(h)},g.prototype.entries=function(){var h=[];return this.forEach(function(b,D){h.push([D,b])}),p(h)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(h){if(!h._noBody){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}}function _(h){return new Promise(function(b,D){h.onload=function(){b(h.result)},h.onerror=function(){D(h.error)}})}function S(h){var b=new FileReader,D=_(b);return b.readAsArrayBuffer(h),D}function w(h){var b=new FileReader,D=_(b),v=/charset=([A-Za-z0-9_-]+)/.exec(h.type),A=v?v[1]:"utf-8";return b.readAsText(h,A),D}function O(h){for(var b=new Uint8Array(h),D=new Array(b.length),v=0;v<b.length;v++)D[v]=String.fromCharCode(b[v]);return D.join("")}function F(h){if(h.slice)return h.slice(0);var b=new Uint8Array(h.byteLength);return b.set(new Uint8Array(h)),b.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:c.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():c.arrayBuffer&&c.blob&&s(h)?(this._bodyArrayBuffer=F(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||l(h))?this._bodyArrayBuffer=F(h):this._bodyText=h=Object.prototype.toString.call(h):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=m(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(ae)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function B(h){var b=h.toUpperCase();return I.indexOf(b)>-1?b:h}function T(h,b){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var D=b.body;if(h instanceof T){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,b.headers||(this.headers=new g(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!D&&h._bodyInit!=null&&(D=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new g(b.headers)),this.method=B(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||function(){if("AbortController"in f){var E=new AbortController;return E.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(D),(this.method==="GET"||this.method==="HEAD")&&(b.cache==="no-store"||b.cache==="no-cache")){var v=/([?&])_=[^&]*/;if(v.test(this.url))this.url=this.url.replace(v,"$1_="+new Date().getTime());else{var A=/\?/;this.url+=(A.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function ae(h){var b=new FormData;return h.trim().split("&").forEach(function(D){if(D){var v=D.split("="),A=v.shift().replace(/\+/g," "),E=v.join("=").replace(/\+/g," ");b.append(decodeURIComponent(A),decodeURIComponent(E))}}),b}function ee(h){var b=new g,D=h.replace(/\r?\n[\t ]+/g," ");return D.split("\r").map(function(v){return v.indexOf(`
`)===0?v.substr(1,v.length):v}).forEach(function(v){var A=v.split(":"),E=A.shift().trim();if(E){var R=A.join(":").trim();try{b.append(E,R)}catch(U){console.warn("Response "+U.message)}}}),b}P.call(T.prototype);function $(h,b){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText===void 0?"":""+b.statusText,this.headers=new g(b.headers),this.url=b.url||"",this._initBody(h)}P.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var h=new $(null,{status:200,statusText:""});return h.ok=!1,h.status=0,h.type="error",h};var le=[301,302,303,307,308];$.redirect=function(h,b){if(le.indexOf(b)===-1)throw new RangeError("Invalid status code");return new $(null,{status:b,headers:{location:h}})},u.DOMException=f.DOMException;try{new u.DOMException}catch{u.DOMException=function(b,D){this.message=b,this.name=D;var v=Error(b);this.stack=v.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function he(h,b){return new Promise(function(D,v){var A=new T(h,b);if(A.signal&&A.signal.aborted)return v(new u.DOMException("Aborted","AbortError"));var E=new XMLHttpRequest;function R(){E.abort()}E.onload=function(){var C={statusText:E.statusText,headers:ee(E.getAllResponseHeaders()||"")};A.url.indexOf("file://")===0&&(E.status<200||E.status>599)?C.status=200:C.status=E.status,C.url="responseURL"in E?E.responseURL:C.headers.get("X-Request-URL");var L="response"in E?E.response:E.responseText;setTimeout(function(){D(new $(L,C))},0)},E.onerror=function(){setTimeout(function(){v(new TypeError("Network request failed"))},0)},E.ontimeout=function(){setTimeout(function(){v(new TypeError("Network request timed out"))},0)},E.onabort=function(){setTimeout(function(){v(new u.DOMException("Aborted","AbortError"))},0)};function U(C){try{return C===""&&f.location.href?f.location.href:C}catch{return C}}if(E.open(A.method,U(A.url),!0),A.credentials==="include"?E.withCredentials=!0:A.credentials==="omit"&&(E.withCredentials=!1),"responseType"in E&&(c.blob?E.responseType="blob":c.arrayBuffer&&(E.responseType="arraybuffer")),b&&typeof b.headers=="object"&&!(b.headers instanceof g||f.Headers&&b.headers instanceof f.Headers)){var N=[];Object.getOwnPropertyNames(b.headers).forEach(function(C){N.push(d(C)),E.setRequestHeader(C,y(b.headers[C]))}),A.headers.forEach(function(C,L){N.indexOf(L)===-1&&E.setRequestHeader(L,C)})}else A.headers.forEach(function(C,L){E.setRequestHeader(L,C)});A.signal&&(A.signal.addEventListener("abort",R),E.onreadystatechange=function(){E.readyState===4&&A.signal.removeEventListener("abort",R)}),E.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return he.polyfill=!0,f.fetch||(f.fetch=he,f.Headers=g,f.Request=T,f.Response=$),u.Headers=g,u.Request=T,u.Response=$,u.fetch=he,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=r.fetch?r:n;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t})(Tt,Tt.exports);var Pf=Tt.exports;const kr=Xr(Pf);var Nf=Object.defineProperty,Uf=Object.defineProperties,jf=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,Lf=Object.prototype.hasOwnProperty,Mf=Object.prototype.propertyIsEnumerable,qr=(e,t,r)=>t in e?Nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vr=(e,t)=>{for(var r in t||(t={}))Lf.call(t,r)&&qr(e,r,t[r]);if(Hr)for(var r of Hr(t))Mf.call(t,r)&&qr(e,r,t[r]);return e},Kr=(e,t)=>Uf(e,jf(t));const zf={Accept:"application/json","Content-Type":"application/json"},$f="POST",Yr={headers:zf,method:$f},Gr=10;class hl{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new Je.EventEmitter,this.isAvailable=!1,this.registering=!1,!Mr(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const r=_e(t),n=await(await kr(this.url,Kr(Vr({},Yr),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!Mr(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));n()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=_e({id:1,jsonrpc:"2.0",method:"test",params:[]});await kr(t,Kr(Vr({},Yr),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?It(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),o=n.message||n.toString(),i=Wn(t,o);this.events.emit("payload",i)}parseError(t,r=this.url){return Ln(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Gr&&this.events.setMaxListeners(Gr)}}export{Zf as A,qn as B,il as C,$n as D,Xf as E,hl as F,xo as I,nn as O,el as P,lu as Q,Tu as a,ol as b,Xe as c,Pu as d,nl as e,rl as f,Wu as g,ju as h,Vf as i,_e as j,It as k,Jf as l,qf as m,fl as n,ul as o,al as p,xf as q,sl as r,Qf as s,To as t,mf as u,tl as v,Df as w,Wn as x,vi as y,Bf as z};
